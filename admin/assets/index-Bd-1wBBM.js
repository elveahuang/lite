var A=Object.defineProperty;var E=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var M=(e,n,a)=>n in e?A(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,I=(e,n)=>{for(var a in n||(n={}))q.call(n,a)&&M(e,a,n[a]);if(E)for(var a of E(n))L.call(n,a)&&M(e,a,n[a]);return e};var m=(e,n,a)=>new Promise((f,x)=>{var b=o=>{try{c(a.next(o))}catch(d){x(d)}},r=o=>{try{c(a.throw(o))}catch(d){x(d)}},c=o=>o.done?f(o.value):Promise.resolve(o.value).then(b,r);c((a=a.apply(e,n)).next())});import{ai as F,U as B,j as s,ac as k,a1 as i,a0 as y,r as u,ad as U,ae as H,af as K,$ as g}from"./index-DU9AALyB.js";import{P as V,u as $,b as G,c as J,M as Q,d as W,s as X}from"./data-table-64nBu-F6.js";import{F as _}from"./index-Piuy7zc0.js";const Y=e=>F("/api/admin/user/list",e),Z=e=>F("/api/admin/user/save",e),ee=e=>F("/api/admin/user/delete",e),se=e=>ae(e)&&e%1===0,ae=e=>{try{return Number(e)===e}catch(n){return!1}},re=()=>{const{t:e}=B(),{initialize:n,handleResult:a,handleParams:f}=W(),b={columns:[{key:"username",dataIndex:"username",title:e("common:user_field_username")},{key:"operations",dataIndex:"id",title:e("common:label_action"),width:"200px",render:(t,l,T)=>s.jsxs(k,{children:[s.jsx(i,{size:"small",icon:s.jsx(y,{icon:"mdi:eye-outline"}),onClick:()=>{S(l.id).then()}}),s.jsx(i,{size:"small",icon:s.jsx(y,{icon:"ant-design:edit-outlined"})}),s.jsx(V,{title:e("common:label_confirm_delete_record"),description:e("common:label_confirm_delete_record"),onConfirm:()=>{w(l.id).then()},onCancel:()=>{},children:s.jsx(i,{size:"small",danger:!0,icon:s.jsx(y,{icon:"ant-design:close-outlined"})})})]})}]},[r,c]=u.useState(n(b)),[o,{toggle:d}]=$(!1),p=u.useRef(),D=()=>m(void 0,null,function*(){X(r,!0),yield Y(f(r)).then(t=>{c(a(r,t))})}),w=(t=0)=>m(void 0,null,function*(){console.log(t),console.log(se(t));const l=t?[t]:p.current.getSelectedRowKeys();if(console.log(l),U(l)){H(e("common:label_please_select_one_record")).then();return}ee({ids:l}).then(T=>{T.code=="200"&&p.current.refresh()})}),[R,h]=u.useState(!1),[v,C]=u.useState(""),[j,N]=u.useState({}),[O]=_.useForm(),S=(t=0)=>m(void 0,null,function*(){t&&t>0?(C(e("common:user_pages_edit_title")),yield G({id:t}).then(l=>{N(Object.assign(j,I({},l.data)))}),h(!0)):(C(e("common:user_pages_add_title")),h(!0))}),P=()=>{h(!1)},z=t=>m(void 0,null,function*(){Z(j).then(l=>{l.code=="200"&&(h(!1),p.current.refresh())})});return s.jsxs(s.Fragment,{children:[s.jsx(J,{}),s.jsx("div",{className:"py-4",children:s.jsxs(k,{children:[s.jsx(i,{onClick:()=>{S().then()},children:e("common:button_add")}),s.jsx(i,{onClick:d,children:e(o?"common:label_batch_operation_cancel":"common:label_batch_operation")}),s.jsx(i,{onClick:()=>{w().then()},children:e("common:button_delete")})]})}),s.jsx(K,{ref:p,model:r,getDataList:D,rowSelectionEnabled:o,rowSelectionMultipleEnabled:o}),s.jsx(Q,{open:R,title:v,width:980,onOk:()=>{},onCancel:()=>{P()},children:s.jsxs(_,{form:O,className:"entity-form",labelCol:{span:4},wrapperCol:{span:12},initialValues:j,onFinish:z,onFinishFailed:()=>{},children:[s.jsx(_.Item,{name:"username",label:e("common:user_field_username"),rules:[{required:!0,message:e("common:user_field_username_validation")}],children:s.jsx(g,{placeholder:e("common:user_field_username_placeholder")})}),s.jsx(_.Item,{name:"displayName",label:e("common:user_field_display_name"),rules:[{required:!0,message:e("common:user_field_display_name_validation")}],children:s.jsx(g,{placeholder:e("common:user_field_display_name_placeholder")})}),s.jsx(_.Item,{name:"password",label:e("common:user_field_password"),rules:[{required:!0,message:e("common:user_field_password_validation")}],children:s.jsx(g,{placeholder:e("common:user_field_password_placeholder")})})]})})]})};export{re as default};
