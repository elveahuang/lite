var U=Object.defineProperty;var O=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var v=(e,a,n)=>a in e?U(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,E=(e,a)=>{for(var n in a||(a={}))H.call(a,n)&&v(e,n,a[n]);if(O)for(var n of O(a))K.call(a,n)&&v(e,n,a[n]);return e};var i=(e,a,n)=>new Promise((x,b)=>{var j=t=>{try{m(n.next(t))}catch(u){b(u)}},r=t=>{try{m(n.throw(t))}catch(u){b(u)}},m=t=>t.done?x(t.value):Promise.resolve(t.value).then(j,r);m((n=n.apply(e,a)).next())});import{ao as f,U as $,j as s,au as T,a1 as c,a0 as w,r as d,av as G,aw as J,ax as Q,$ as y}from"./index-C-NYZ_If.js";import{P as W,u as X,a as Y,M as D,b as Z,s as ee}from"./data-table-B8Wnaktk.js";import{F as _}from"./index-oDPIccxC.js";const se=e=>f("/api/admin/user/list",e),ne=e=>f("/api/admin/user/details",e),ae=e=>f("/api/admin/user/save",e),oe=e=>f("/api/admin/user/delete",e),te=e=>le(e)&&e%1===0,le=e=>{try{return Number(e)===e}catch(a){return!1}},me=()=>{const{t:e}=$(),{initialize:a,handleResult:n,handleParams:x}=Z(),j={columns:[{key:"username",dataIndex:"username",title:e("common:user_field_username")},{key:"operations",dataIndex:"id",title:e("common:label_action"),width:"200px",render:(o,l,I)=>s.jsxs(T,{children:[s.jsx(c,{size:"small",icon:s.jsx(w,{icon:"mdi:eye-outline"}),onClick:()=>{B(l.id).then()}}),s.jsx(c,{size:"small",icon:s.jsx(w,{icon:"ant-design:edit-outlined"}),onClick:()=>{F(l.id).then()}}),s.jsx(W,{title:e("common:label_confirm_delete_record"),description:e("common:label_confirm_delete_record"),onConfirm:()=>{C(l.id).then()},onCancel:()=>{},children:s.jsx(c,{size:"small",danger:!0,icon:s.jsx(w,{icon:"ant-design:close-outlined"})})})]})}]},[r,m]=d.useState(a(j)),[t,{toggle:u}]=X(!1),p=d.useRef(),N=()=>i(void 0,null,function*(){ee(r,!0),yield se(x(r)).then(o=>{m(n(r,o))})}),C=(o=0)=>i(void 0,null,function*(){console.log(o),console.log(te(o));const l=o?[o]:p.current.getSelectedRowKeys();if(console.log(l),G(l)){J(e("common:label_please_select_one_record")).then();return}oe({ids:l}).then(I=>{I.code=="200"&&p.current.refresh()})}),[P,h]=d.useState(!1),[R,S]=d.useState(""),[g,z]=d.useState({}),[A]=_.useForm(),F=(o=0)=>i(void 0,null,function*(){o&&o>0?(S(e("common:user_pages_edit_title")),yield ne({id:o}).then(l=>{z(Object.assign(g,E({},l.data)))}),h(!0)):(S(e("common:user_pages_add_title")),h(!0))}),V=o=>i(void 0,null,function*(){ae(g).then(l=>{l.code=="200"&&(h(!1),p.current.refresh())})}),q=()=>{h(!1)},[L,M]=d.useState(!1),B=(o=0)=>i(void 0,null,function*(){M(!0)}),k=()=>{M(!1)};return s.jsxs(s.Fragment,{children:[s.jsx(Y,{}),s.jsx("div",{className:"py-4",children:s.jsxs(T,{children:[s.jsx(c,{onClick:()=>{F(0).then()},children:e("common:button_add")}),s.jsx(c,{onClick:u,children:e(t?"common:label_batch_operation_cancel":"common:label_batch_operation")}),s.jsx(c,{onClick:()=>{C().then()},children:e("common:button_delete")})]})}),s.jsx(Q,{ref:p,model:r,getDataList:N,rowSelectionEnabled:t,rowSelectionMultipleEnabled:t}),s.jsx(D,{open:L,title:e("common:user_field_username"),width:980,onOk:()=>{k()},onCancel:()=>{k()}}),s.jsx(D,{open:P,title:R,width:980,onOk:()=>{},onCancel:()=>{q()},children:s.jsxs(_,{form:A,className:"entity-form",labelCol:{span:4},wrapperCol:{span:12},initialValues:g,onFinish:V,onFinishFailed:()=>{},children:[s.jsx(_.Item,{name:"username",label:e("common:user_field_username"),rules:[{required:!0,message:e("common:user_field_username_validation")}],children:s.jsx(y,{placeholder:e("common:user_field_username_placeholder")})}),s.jsx(_.Item,{name:"displayName",label:e("common:user_field_display_name"),rules:[{required:!0,message:e("common:user_field_display_name_validation")}],children:s.jsx(y,{placeholder:e("common:user_field_display_name_placeholder")})}),s.jsx(_.Item,{name:"password",label:e("common:user_field_password"),rules:[{required:!0,message:e("common:user_field_password_validation")}],children:s.jsx(y,{placeholder:e("common:user_field_password_placeholder")})})]})})]})};export{me as default};
