var $=Object.defineProperty;var E=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var T=(e,o,n)=>o in e?$(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,g=(e,o)=>{for(var n in o||(o={}))G.call(o,n)&&T(e,n,o[n]);if(E)for(var n of E(o))J.call(o,n)&&T(e,n,o[n]);return e};var c=(e,o,n)=>new Promise((x,b)=>{var j=l=>{try{m(n.next(l))}catch(u){b(u)}},i=l=>{try{m(n.throw(l))}catch(u){b(u)}},m=l=>l.done?x(l.value):Promise.resolve(l.value).then(j,i);m((n=n.apply(e,o)).next())});import{ao as f,U as Q,j as s,au as D,a1 as d,a0 as y,r,av as W,aw as X,ax as Y,$ as S}from"./index-Xx9JlUaP.js";import{P as Z,u as ee,a as se,M as N,b as ne,s as ae}from"./data-table-ChiRu80p.js";import{F as _}from"./index-BGLM1qAi.js";const oe=e=>f("/api/admin/user/list",e),P=e=>f("/api/admin/user/details",e),te=e=>f("/api/admin/user/save",e),le=e=>f("/api/admin/user/delete",e),re=e=>ie(e)&&e%1===0,ie=e=>{try{return Number(e)===e}catch(o){return!1}},_e=()=>{const{t:e}=Q(),{initialize:o,handleResult:n,handleParams:x}=ne(),j={columns:[{key:"username",dataIndex:"username",title:e("common:user_field_username")},{key:"operations",dataIndex:"id",title:e("common:label_action"),width:"200px",render:(a,t,v)=>s.jsxs(D,{children:[s.jsx(d,{size:"small",icon:s.jsx(y,{icon:"mdi:eye-outline"}),onClick:()=>{K(t.id).then()}}),s.jsx(d,{size:"small",icon:s.jsx(y,{icon:"ant-design:edit-outlined"}),onClick:()=>{M(t.id).then()}}),s.jsx(Z,{title:e("common:label_confirm_delete_record"),description:e("common:label_confirm_delete_record"),onConfirm:()=>{C(t.id).then()},onCancel:()=>{},children:s.jsx(d,{size:"small",danger:!0,icon:s.jsx(y,{icon:"ant-design:close-outlined"})})})]})}]},[i,m]=r.useState(o(j)),[l,{toggle:u}]=ee(!1),p=r.useRef(),R=()=>c(void 0,null,function*(){ae(i,!0),yield oe(x(i)).then(a=>{m(n(i,a))})}),C=(a=0)=>c(void 0,null,function*(){console.log(a),console.log(re(a));const t=a?[a]:p.current.getSelectedRowKeys();if(console.log(t),W(t)){X(e("common:label_please_select_one_record")).then();return}le({ids:t}).then(v=>{v.code=="200"&&p.current.refresh()})}),[V,h]=r.useState(!1),[z,F]=r.useState(""),[w,A]=r.useState({}),[q]=_.useForm(),M=(a=0)=>c(void 0,null,function*(){a&&a>0?(F(e("common:user_pages_edit_title")),yield P({id:a}).then(t=>{A(Object.assign(w,g({},t.data)))}),h(!0)):(F(e("common:user_pages_add_title")),h(!0))}),L=a=>c(void 0,null,function*(){yield te(w).then(t=>{t.code=="200"&&(h(!1),p.current.refresh())})}),B=()=>{h(!1)},[U,k]=r.useState(!1),[I,H]=r.useState({}),K=(a=0)=>c(void 0,null,function*(){a&&a>0&&(yield P({id:a}).then(t=>{H(Object.assign(I,g({},t.data)))}),k(!0))}),O=()=>{k(!1)};return s.jsxs(s.Fragment,{children:[s.jsx(se,{}),s.jsx("div",{className:"py-4",children:s.jsxs(D,{children:[s.jsx(d,{onClick:()=>{M(0).then()},children:e("common:button_add")}),s.jsx(d,{onClick:u,children:e(l?"common:label_batch_operation_cancel":"common:label_batch_operation")}),s.jsx(d,{onClick:()=>{C().then()},children:e("common:button_delete")})]})}),s.jsx(Y,{ref:p,model:i,getDataList:R,rowSelectionEnabled:l,rowSelectionMultipleEnabled:l}),s.jsx(N,{open:U,title:e("common:user_field_username"),width:980,onOk:()=>{O()},onCancel:()=>{O()},children:I.username}),s.jsx(N,{open:V,title:z,width:980,onOk:()=>{},onCancel:()=>{B()},children:s.jsxs(_,{form:q,className:"entity-form",labelCol:{span:4},wrapperCol:{span:12},initialValues:w,onFinish:L,onFinishFailed:()=>{},children:[s.jsx(_.Item,{name:"username",label:e("common:user_field_username"),rules:[{required:!0,message:e("common:user_field_username_validation")}],children:s.jsx(S,{placeholder:e("common:user_field_username_placeholder")})}),s.jsx(_.Item,{name:"displayName",label:e("common:user_field_display_name"),rules:[{required:!0,message:e("common:user_field_display_name_validation")}],children:s.jsx(S,{placeholder:e("common:user_field_display_name_placeholder")})}),s.jsx(_.Item,{name:"password",label:e("common:user_field_password"),rules:[{required:!0,message:e("common:user_field_password_validation")}],children:s.jsx(S,{placeholder:e("common:user_field_password_placeholder")})})]})})]})};export{_e as default};
